(function(a){a.fn.ThemifyMegaMenu=function(d){var c=a.extend({events:"mouseenter"},d),b={};return this.each(function(){var e=a(this),f=a(".mega-menu-posts",e);e.on(c.events+" touchend",".mega-link",function(h){h.preventDefault();if(themifyScript.menuInSidePanel){return}var i=a(this),j=i.data("termid"),g=i.data("tax");if("string"==typeof b[j]){f.html(b[j])}else{if(i.hasClass("loading")){return}i.addClass("loading");a.post(themifyScript.ajax_url,{action:"themify_theme_mega_posts",termid:j,tax:g},function(k){f.html(k);b[j]=k;i.removeClass("loading")})}});e.on("mouseenter","> a",function(){a(this).closest("li").find(".mega-sub-menu .mega-link:first").trigger(c.events)}).on("dropdown_open",function(){a(this).find(".mega-sub-menu .mega-link:first").trigger(c.events)})})};a(document).ready(function(){if("undefined"!==typeof a.fn.ThemifyMegaMenu){a(".has-mega-sub-menu").each(function(){var b=a(this);b.find("> ul").removeAttr("class").wrap('<div class="mega-sub-menu sub-menu" />').after('<div class="mega-menu-posts" />').find("li.menu-item-type-taxonomy").addClass("mega-link")});a(".has-mega-sub-menu").ThemifyMegaMenu({events:themifyScript.events})}})})(jQuery);